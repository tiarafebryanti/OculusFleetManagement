<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>OCULUS FLEET | GTEI Tugboat Fleet Management</title>
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
    <link rel="icon" href="assets/img/examples/logo-oculus.png" type="image/x-icon" />

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <!-- Boxicons CDN -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />

    <!-- CSS Files -->
    <link id="pagestyle" href="../assets/css/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  </head>

  <body>
    <nav class="sidebar close">
      <header>
        <div class="image-text">
          <span class="image">
            <img src="../assets/img/examples/logo-oculus.png" alt="logo" />
          </span>
        </div>
        <i class="bx bx-chevron-right toggle"></i>
      </header>

      <div class="menu-bar">
        <div class="menu"></div>
        <ul class="menu-links">
          <li class="nav-link active">
            <a href="./index.html">
              <i class="fa-solid fa-house icon"></i>
              <span class="text nav-text">Dashboard</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="./pages/schedule.html">
              <i class="fas fa-calendar-days icon"></i>
              <span class="text nav-text">Schedule</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="./pages/tripsummary.html">
              <i class="fas fa-window-maximize icon"></i>
              <span class="text nav-text">Trip Summary</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-charging-station icon"></i>
              <span class="text nav-text">Refuelings</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-wrench icon"></i>
              <span class="text nav-text">Maintenances</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-ship icon"></i>
              <span class="text nav-text">Vehicles</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-microchip icon"></i>
              <span class="text nav-text">Devices</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-bell icon"></i>
              <span class="text nav-text">Alarms</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-users icon"></i>
              <span class="text nav-text">Users</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-server icon"></i>
              <span class="text nav-text">Servers</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-map-pin icon"></i>
              <span class="text nav-text">Locations</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-magnifying-glass-chart icon"></i>
              <span class="text nav-text">Monitor</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="./pages/configuration.html">
              <i class="fas fa-sliders-h icon"></i>
              <span class="text nav-text">Configuration</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-globe icon"></i>
              <span class="text nav-text">Time Zones</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="">
              <i class="fas fa-user icon"></i>
              <span class="text nav-text">Profile</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="./pages/sign-up.html">
              <i class="fas fa-right-from-bracket icon"></i>
              <span class="text nav-text">Logout</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <header class="header">
      <div>
        <select id="tugboat-select" class="form-select-tugboat custom-select">
          <option value="">Pilih Kendaraan</option>
        </select>
      </div>
      <div>
        <select id="timeline-select" class="form-select-timeline custom-select">
          <option value="">2024-11-22 08:47:24 - 2024-11-22 09:04:27</option>
        </select>
      </div>
      <i class="bx bx-chevron-left header-btn"></i>
      <i class="bx bx-chevron-right header-btn"></i>
      <i class="bx bx-bar-chart header-btn"></i>
      <i class="fa-regular fa-map map-btn"></i>
      <i class="bx bx-map header-btn"></i>
      <i class="bx bx-bell header-btn"></i>
      <i class="bx bx-git-merge header-btn"></i>
    </header>

    <main class="main-content">
      <div id="map"></div>
      <div class="sidebar-timeline-tugboat">
        <i class="bx bx-chevron-right hide-sidebar"></i>
        <div class="sidebar-card">
          <div class="distance-title">Distance</div>
          <div class="distance-value">5,37 km</div>
        </div>
        <div class="sidebar-card">
          <div class="distance-title">Time</div>
          <div class="distance-value">00:17:13</div>
        </div>
        <div class="timeline-table-container">
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Coordinate</th>
                <th>Speed</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
              <tr>
                <td>2024-11-22 09:04:27</td>
                <td>-6.45813,106.83230</td>
                <td>15,00 km/h</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="sidebar-dashboard">
        <div class="sidebar-dashboard-content">
          <i class="bx bx-chevron-right hide-sidebar-dashboard"></i>
          <div class="gap-row">
            <i class="fa-solid fa-server icon-circle"></i>
            <div>
              <div class="title-icon-circle">Server</div>
              <div class="value-icon-circle">
                Server created on port 8091 for the teltonika protocol
              </div>
            </div>
          </div>
          <div class="gap-row">
            <i class="fa-solid fa-ship icon-circle"></i>
            <div>
              <div class="title-icon-circle">Vehicle</div>
              <div class="value-icon-circle">
                Server created on port 8091 for the teltonika protocol
              </div>
            </div>
          </div>
          <div class="gap-row">
            <i class="fa-solid fa-computer icon-circle"></i>
            <div>
              <div class="title-icon-circle">Devices</div>
              <div class="value-icon-circle">
                Server created on port 8091 for the teltonika protocol
              </div>
            </div>
          </div>
          <div class="gap-row">
            <i class="fa-solid fa-route icon-circle"></i>
            <div>
              <div class="title-icon-circle">Waiting for Trips</div>
              <div class="value-icon-circle">
                The server is waiting to receive the first connections from a device
              </div>
            </div>
          </div>

          <div class="stats-container">
            <!-- Total Distance -->
            <div class="stats-section">
              <div class="stats-header">Total Distance</div>
              <div class="stats-value">5,37 km</div>
            </div>

            <!-- Speed Statistics -->
            <div class="stats-section">
              <div class="stats-header">Speed Statistics</div>
              <div class="stats-row">
                <span>Average Speed</span>
                <span>0.00 km/h</span>
              </div>
              <div class="stats-row">
                <span>Maximum Speed</span>
                <span>0.00 km/h</span>
              </div>
              <div class="stats-row">
                <span>Minimum Speed</span>
                <span>0.00 km/h</span>
              </div>
            </div>

            <!-- Time Statistics -->
            <div class="stats-section">
              <div class="stats-header">Time Statistics</div>
              <div class="stats-row">
                <span>Total Time</span>
                <span>00:00:00</span>
              </div>
              <div class="stats-row">
                <span>Stopped Time</span>
                <span>00:00:00</span>
              </div>
              <div class="stats-row">
                <span>Movement Time</span>
                <span>00:00:00</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="video-container">
        <!-- Video Grid -->
        <div class="video-grid">
          <div
            style="position: relative"
            onclick="zoomVideo('https://www.w3schools.com/html/mov_bbb.mp4', 'Front Cam')"
          >
            <div class="video-label">Front Cam</div>
            <iframe
              src="https://www.youtube.com/embed/6giEyn-GPEQ?autoplay=1&mute=1"
              title="Front Cam"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen
            >
            </iframe>
          </div>

          <div
            style="position: relative"
            onclick="zoomVideo('https://www.w3schools.com/html/mov_bbb.mp4', 'Rear Cam')"
          >
            <div class="video-label">Rear Cam</div>
            <iframe
              src="https://www.youtube.com/embed/6giEyn-GPEQ?autoplay=1&mute=1"
              title="Front Cam"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen
            >
            </iframe>
          </div>

          <div
            style="position: relative"
            onclick="zoomVideo('https://www.w3schools.com/html/mov_bbb.mp4', 'Bridge Cam')"
          >
            <div class="video-label">Bridge Cam</div>
            <iframe
              src="https://www.youtube.com/embed/6giEyn-GPEQ?autoplay=1&mute=1"
              title="Front Cam"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen
            >
            </iframe>
          </div>

          <div
            style="position: relative"
            onclick="zoomVideo('https://www.w3schools.com/html/mov_bbb.mp4', 'Engine Room')"
          >
            <div class="video-label">Engine Room</div>
            <iframe
              src="https://www.youtube.com/embed/6giEyn-GPEQ?autoplay=1&mute=1"
              title="Front Cam"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen
            >
            </iframe>
          </div>
        </div>

        <!-- Modal Zoom -->
        <div class="modal" id="videoModal">
          <div class="modal-content">
            <button class="close-btn" onclick="closeModal()"></button>
            <video id="modalVideo" src="" controls autoplay></video>
          </div>
        </div>
      </div>
    </main>

    <script>
      document.querySelector('.hide-sidebar').addEventListener('click', function () {
        document.querySelector('.sidebar-timeline-tugboat').classList.toggle('collapsed');
      });
    </script>

    <script>
      document.querySelector('.hide-sidebar-dashboard').addEventListener('click', function () {
        document.querySelector('.sidebar-dashboard').classList.toggle('collapsed');
      });
    </script>

    <script>
      function zoomVideo(videoSrc, label) {
        const modal = document.getElementById('videoModal');
        const modalVideo = document.getElementById('modalVideo');
        modal.style.display = 'flex';
        modalVideo.src = videoSrc;
        modalVideo.play();
      }

      function closeModal() {
        const modal = document.getElementById('videoModal');
        const modalVideo = document.getElementById('modalVideo');
        modalVideo.pause();
        modalVideo.src = '';
        modal.style.display = 'none';
      }

      // Close modal if clicked outside content
      window.onclick = function (event) {
        const modal = document.getElementById('videoModal');
        if (event.target === modal) {
          closeModal();
        }
      };
    </script>

    <script src="../assets/js/script.js"></script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

    <script>
      const apiKey = '46e83f19b2e3244bbe77f80885ca3c2b';
      const map = L.map('map', {
        center: [-3.1, 114.65],
        zoom: 9,
        zoomControl: false, // Supaya kita bisa pindahkan posisi zoom control
      });

      // Tambahkan tile dasar
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors',
      }).addTo(map);

      // Tambahkan kontrol zoom ke kanan atas
      L.control.zoom({ position: 'topleft' }).addTo(map);

      // Weather overlay layers
      const clouds = L.tileLayer(
        `https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${apiKey}`,
        {
          opacity: 1.0,
          attribution: '&copy; <a href="https://openweathermap.org/">OpenWeatherMap</a>',
        },
      );

      const precipitation = L.tileLayer(
        `https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=${apiKey}`,
        {
          opacity: 1.0,
        },
      );

      const rain = L.tileLayer(
        `https://tile.openweathermap.org/map/rain_new/{z}/{x}/{y}.png?appid=${apiKey}`,
        {
          opacity: 1.0,
        },
      );

      const snow = L.tileLayer(
        `https://tile.openweathermap.org/map/snow_new/{z}/{x}/{y}.png?appid=${apiKey}`,
        {
          opacity: 1.0,
        },
      );

      const temp = L.tileLayer(
        `https://tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=${apiKey}`,
        {
          opacity: 0.5,
        },
      );

      const wind = L.tileLayer(
        `https://tile.openweathermap.org/map/wind_new/{z}/{x}/{y}.png?appid=${apiKey}`,
        {
          opacity: 1.0,
        },
      );

      // Layer Groups
      const overlays = {
        Clouds: clouds,
        Precipitation: precipitation,
        Rain: rain,
        Snow: snow,
        Temperature: temp,
        Wind: wind,
      };

      L.control
        .layers(null, overlays, {
          collapsed: true,
          position: 'topleft', // atau "topleft", "topright", "bottomright"
        })
        .addTo(map);
    </script>
  </body>
</html>
